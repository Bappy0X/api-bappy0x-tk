{% extends "base.html" %}

{% block title %}Docs{% endblock %}

{% block content -%}
    {% set badges = {"GET": "info", "DELETE": "danger", "PUT": "warning", "POST": "success", "PATCH": "primary"} -%}
    {% for doc in autodoc -%}
    <div style="border: 1px solid black;">
        <div class="row">
            <div class="col">
                <h2 style="margin-bottom: 0;">{{ doc.endpoint }}</h2>
                <a href="{{ doc.rule }}">{{ doc.rule }}</a>
            </div>
            <div class="col d-flex justify-content-end">
                {%- for method in doc.methods %}
                {%- if method.upper() in badges %}
                <h3><span class="badge badge-{{ badges[method] }} ml-2">{{ method | upper }}</span></h3>
                {%- endif %}
                {%- endfor %}
            </div>
        </div>
        <small class="text-muted">Info:</small>
        {{ doc.docstring | markdown }}
        {%- if len(doc.args) > 0 and doc.args[0] != "None" %}
        <h3>Arguments:</h3>
        <ul>
            {%- for arg in doc.args %}
            <li>{{ arg }} default={{ doc.defaults[arg] }}</li>
            {%- endfor %}
        </ul>
        {%- endif %}
    </div>
    {%- endfor %}
{%- endblock %}